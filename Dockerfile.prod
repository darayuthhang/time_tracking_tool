# Build the React frontend
FROM node:18-alpine as client-build

WORKDIR /app/client

COPY client/package*.json ./
RUN npm install

COPY client/ ./
RUN npm run build

# Build the Node.js Express backend
FROM node:18-alpine as server-build

WORKDIR /app/server

COPY server/package*.json ./
RUN npm install

COPY server/ ./

# # Set the environment variables for production

# ENV NODE_ENV=production
# ENV PORT=5000

# # Expose the desired server port
# EXPOSE $PORT

CMD ["npm", "start"]
